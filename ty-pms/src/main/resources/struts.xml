<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
	"http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>

	<!-- 
	配置好struts2框架的国际化资源文件的basename后，
	开发者就可以按照basename_language_country.properties命名规则来建立不同语言环境的资源文件了。
	（注意：一定要unicode编码）
	 -->
	<constant name="struts.custom.i18n.resources" value="i18n/Applicationi18nResources" />
	
    <constant name="struts.enable.DynamicMethodInvocation" value="false" />
    <constant name="struts.devMode" value="true" />
	<constant name="struts.i18n.encoding" value="UTF-8" />
	
	<constant name="struts.action.extension" value="do,action,html" />
	
	<include file ="struts-default.xml" />    

    <package name="default" namespace="/" extends="struts-default">
		
		<interceptors> 
            <interceptor name ="auth" class ="ty.pms.interceptor.AuthorizationInterceptor" /> 
            <!-- 定义拦截器栈,所谓拦截器栈,是指由一个或多个拦截器组成 -->  
            <interceptor-stack name="tyStack">
            	 <!-- struts2 提供的拦截器栈,包含了struts2的很多核心拦截器 -->  
                <interceptor-ref name="defaultStack" />  
                 <!-- 自己定义的放在最后面,struts2定义的放在前面 -->  
                <interceptor-ref name="auth" />  
			</interceptor-stack>
        </interceptors > 
        
        <!-- 为此包下的所有action应用拦截器 -->  
        <!-- 
        <default-interceptor-ref name="tyStack" />  
         -->
         
        <!-- 
                     全局result(global-results)
		执行顺序：当一个Action返回的String没有相应的<result>与之对应，Struts2就会查找全局的<result>。
        --> 	
		<global-results>  
            <result name="login">/index.jsp</result>  
        </global-results>  
        
		<!--  
			Spring 整合 Struts2 时, 在 Struts2 中配置的 Spring 的 Action 的 class 需要指向 IOC 容器中该 bean 的 id
		-->
		<action name="login_*" class="loginAction" method="{1}">
		    <result name="success">/pages/main/main.jsp</result>
		    <result name="fail">/index.jsp</result>
		</action>
		
		<action name="user_*" class="ty.pms.action.User.UserAction"
			method="{1}">
			<interceptor-ref name ="tyStack" /> 
		
			<result name="list">/pages/main/user.jsp</result>
			<result name="edit">/pages/main/userEdit.jsp</result>	
		</action>
		
		<action name="d2d_*" class="ty.pms.action.time.Day2DayAction"
			method="{1}">
			<interceptor-ref name ="tyStack" /> 
			<result name="list">/pages/time/d2dList.jsp</result>
			<result name="edit">/pages/time/d2dEdit.jsp</result>
				
		 </action>
		
		<action name="menu_*" class="ty.pms.action.menu.MenuAction"
			method="{1}">
			<result name="list">/pages/main/menu.jsp</result>
		</action>
		
    </package>

</struts>